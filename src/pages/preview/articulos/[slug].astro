---
export const prerender = false;

import { getEntryBySlug } from "astro:content";

const { slug } = Astro.params;

const entry = slug ? await getEntryBySlug("articulos", slug) : null;

if (!entry) {
  Astro.response.status = 404;
}
const rendered = entry ? await entry.render() : null;
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{entry ? `${entry.data.title} — Preview` : "No encontrado — Preview"}</title>
  </head>

  <body>
    <main style="max-width: 980px; margin: 24px auto; padding: 12px;">
      <p style="opacity:.7; font-size: 13px; margin: 0 0 16px;">
        PREVIEW (incluye borradores).
      </p>

      {entry && rendered ? (
        <article>
          <h1 style="margin: 0 0 8px;">{entry.data.title}</h1>
          {entry.data.deck ? <p style="margin: 0 0 16px; opacity: .85;">{entry.data.deck}</p> : null}
          <rendered.Content />
        </article>
      ) : (
        <p>No encontrado.</p>
      )}
    </main>
  </body>
</html>